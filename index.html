<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Document</title>

  <link rel="stylesheet" href="./style/reset.css">
  <link rel="stylesheet" href="./style/frame.css">
</head>
<body>

<div id="whole-wrapper">
  <div id="character-wrapper"></div>
  <div id="chat-wrapper">
    <div id="name"></div>
    <div id="text-wrapper">
      <div id="text"></div>
      <div id="next" onclick="parse(++cursor)">
        &gt;
      </div>
    </div>
    <div id="setting">
      <span>Quick SAVE</span>
      <span>Quick Load</span>
      <span>Log</span>
      <span>Skip</span>
    </div>
  </div>
</div>

<script>

  let cursor = 0

  const scenario = [
    {
      "name": "???",
      "text": "안녕! 만나서 반가워. 나는 권순정 이라고 해!",
      "image": {
        "src": './images/char.PNG',
        "alt": '권순정'
      }
    },
    {
      "name": "권순정",
      "text": "여긴 무슨 일이야? 이 곳은 나만 아는 비밀장손데.",
	  "image": {
        "src": './images/char.PNG',
        "alt": '권순정'
	  }
    },
    {
      "text": "(눈 반짝이며 네 대답 기다림...)"
    },
    {
      "name": "권순정",
      "text": "아... 그냥 쉬러 온 거라고? 나랑 놀고싶어 온 줄 알았는데. 그랬구나...",
      "image": {
        "src": './images/char2.PNG',
        "alt": '권순정'
      }
    },
	{
      "name": "권순정",
      "text": "그래.. 그럼 편히 쉬어! 난 농구연습하러 갈게!^^",
      "image": {
        "src": './images/char.PNG',
        "alt": '권순정'
      }
    },
	{
      "text": "왜인지는 모르겠지만 그녀를실망시킨듯 하다..."
    },
	{
      "text": "-END- 호감도 . . . 0"
    }
  ]


  const parse = (i = 0) => {

    const {text, name, image} = scenario[i];

    //화면을 초기화 해줍니다.
    document.getElementById('name').style.display = 'none';
    document.getElementById('character-wrapper').innerHTML = null;

    //텍스트를 출력 해 줍니다.
    document.getElementById('text').innerText = text;

    //이름유무에 따른 출력
    if (!!name) {
      document.getElementById('name').style.display = 'grid';
      document.getElementById('name').innerText = name;
    }

    //이미지 유무에 따른 출력
    if (!!image) {
      document.getElementById('character-wrapper').innerHTML = `<img src="${image.src}" alt="${image.alt}"/>`
    }

    //커서가 시나리오의 끝에 오면 화살표를 지웁니다.
    if (scenario.length-1 === cursor) {
      document.getElementById('next').style.display = 'none';
    }
  }

  parse(cursor);

</script>
</body>
</html>
